<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Setting up checklist for a package • checklist</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Setting up checklist for a package">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="default" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">checklist</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-tutorials" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Tutorials</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-tutorials">
<li><a class="dropdown-item" href="../articles/philosophy.html">Philosophy of the checklist package</a></li>
    <li><a class="dropdown-item" href="../articles/getting_started.html">Setting up checklist for a package</a></li>
    <li><a class="dropdown-item" href="../articles/getting_started_project.html">Setting up checklist for a project</a></li>
    <li><a class="dropdown-item" href="../articles/organisation.html">Organisations</a></li>
    <li><a class="dropdown-item" href="../articles/spelling.html">Spell checking with checklist</a></li>
    <li><a class="dropdown-item" href="../articles/folder.html">Recommended folder structure</a></li>
    <li><a class="dropdown-item" href="../articles/path.html">File paths in code</a></li>
    <li><a class="dropdown-item" href="../articles/zenodo.html">Setting up the integration between GitHub, Zenodo and ORCID</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-contributing" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Contributing</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-contributing">
<li><a class="dropdown-item" href="../CONTRIBUTING.html">Contributing</a></li>
    <li><a class="dropdown-item" href="../CODE_OF_CONDUCT.html">Code of conduct</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/inbo/checklist/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Setting up checklist for a package</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/inbo/checklist/blob/main/vignettes/getting_started.Rmd" class="external-link"><code>vignettes/getting_started.Rmd</code></a></small>
      <div class="d-none name"><code>getting_started.Rmd</code></div>
    </div>

    
    
<p>Where do you want to set-up <code>checklist</code>?</p>
<ol style="list-style-type: decimal">
<li>I want to create a <a href="#create-package">new R package</a> from
scratch.</li>
<li>I want to use or update <code>checklist</code> in an <a href="#setup-package">existing R package</a>.</li>
</ol>
<p>Go to
<code><a href="../articles/getting_started_project.html">vignette("getting_started_project", package = "checklist")</a></code>
when you want to use <code>checklist</code> on a project.</p>
<div class="section level3">
<h3 id="create-package">Starting an R package from scratch<a class="anchor" aria-label="anchor" href="#create-package"></a>
</h3>
<div class="section level4">
<h4 id="prepare-online-setup">Prepare online setup<a class="anchor" aria-label="anchor" href="#prepare-online-setup"></a>
</h4>
<ol style="list-style-type: decimal">
<li>Go to <a href="https://github.com" class="external-link">https://github.com</a> and login.
Create a new public repository in the INBO organisation. Use the package
name as repository name. Enter the repository name and optionally a
description. Don’t add a <code>README</code>, <code>.gitignore</code> or
<code>LICENSE</code>.</li>
</ol>
</div>
<div class="section level4">
<h4 id="local-setup">Local setup<a class="anchor" aria-label="anchor" href="#local-setup"></a>
</h4>
<ol style="list-style-type: decimal">
<li>Install or update the checklist package with
<code>remotes::install_github("inbo/checklist")</code>.</li>
<li>Use <code><a href="../reference/create_package.html">checklist::create_package()</a></code>. You’ll need to provide
the package name, title, description and maintainer. Please read the
documentation of <code><a href="../reference/create_package.html">create_package()</a></code> prior to running the
function. The function creates an RStudio project with a the package
template in a folder with the name of the package.</li>
<li>Open the newly created RStudio project.</li>
<li>In the <em>Build pane</em>, select <em>More</em> &gt; <em>Configure
Build Tools</em>. Click the <em>Configure</em> button and add a tick to
<em>Install and Restart</em>. All boxes except <em>Vignettes</em> must
be ticked. Close the two dialogue boxes by clicking the <em>OK</em>
buttons (once for each of box).</li>
<li>Open the <code>README.Rmd</code> file and update the content. Knit
the file and stage the <code>README.Rmd</code> and
<code>README.md</code> files.</li>
<li>Review and commit the changes into an initial commit.</li>
<li>Add at least one function to the package.</li>
<li>
<a href="https://r-pkgs.org/whole-game.html#install" class="external-link"><em>Build</em></a> the
package.</li>
<li>Run <code>x &lt;- checklist::check_package()</code>. Fix any issues
that arise during the checks. Repeat the last two steps until you end up
with only a single new note about a <em>New submission</em>.</li>
<li>Run <code>checklist::write_checklist(x)</code>. This functions can
convert some ‘new’ warnings and notes into ‘allowed’ warnings and
notes.</li>
<li>Run <code>x &lt;- checklist::check_package()</code> again to check
that only ‘allowed’ warnings and notes remain. Repeat the last four
steps until you get <em>No problems found</em> at the end of the
checklist output.</li>
<li>Commit any remaining changes.</li>
<li>Run in the git terminal the command
<code>git remote add origin git@github.com:inbo/_your_package_name_.git</code>
where you replace <code>_your_package_name_</code> with the actual
repository name.</li>
<li>Run in the terminal the command
<code>git push -u origin main</code>. This will run the checklist test
on GitHub for the first time. An orange circle, green thick mark or red
cross will appear next to the latest commit or PR.</li>
</ol>
</div>
<div class="section level4">
<h4 id="finalise-online-setup">Finalise online setup<a class="anchor" aria-label="anchor" href="#finalise-online-setup"></a>
</h4>
<ol style="list-style-type: decimal">
<li>Go to <a href="https://about.codecov.io" class="external-link uri">https://about.codecov.io</a> and login with your GitHub
account. Search for your package repository in the INBO organisation.
Copy the token.</li>
<li>Go to your package repository on GitHub. Choose <em>Settings</em>
&gt; <em>Secrets</em>. Add <em>New repository secret</em> with
<em>name</em> <code>CODECOV_TOKEN</code> and the token you copied as
<em>value</em>.</li>
<li>Wait for all tests to finish (either green thick or red cross).</li>
<li>Go in your package GitHub repository to <em>Settings</em> &gt;
<em>Branches</em>. <em>Add rule</em> for <em>Branch name pattern</em>
<code>main</code> and select the following items and <em>Save
changes</em>.
<ul>
<li><code>Require status checks to pass before merging</code></li>
<li><code>Require branches to be up to date before merging</code></li>
<li>
<em>Status checks found in the last week for this repository</em>
<ul>
<li><code>check package</code></li>
<li><code>macOS-latest (release)</code></li>
<li><code>ubuntu (oldrel)</code></li>
<li><code>ubuntu (devel)</code></li>
<li><code>windows (release)</code></li>
</ul>
</li>
</ul>
</li>
<li>Go in your package GitHub repository to <em>Settings</em> &gt;
<em>Pages</em>. Select <em>Deploy for branch</em> as source,
<code>gh-pages</code> as branch and save the changes.</li>
</ol>
</div>
</div>
<div class="section level3">
<h3 id="setup-package">Get it working with an existing package or update the checklist<a class="anchor" aria-label="anchor" href="#setup-package"></a>
</h3>
<div class="section level4">
<h4 id="prerequisites">Prerequisites<a class="anchor" aria-label="anchor" href="#prerequisites"></a>
</h4>
<ol style="list-style-type: decimal">
<li>Make sure the package is using <a href="https://tutorials.inbo.be/tutorials/git_introduction/" class="external-link">git</a> as
version control system.</li>
<li>The git status must be clean. You’ll need to commit all changes
first. It is OK to have Untracked files.</li>
<li>You need a <strong>public</strong> remote git repository at <a href="https://github.com/inbo" class="external-link uri">https://github.com/inbo</a>.</li>
</ol>
</div>
<div class="section level4">
<h4 id="local-setup-1">Local setup<a class="anchor" aria-label="anchor" href="#local-setup-1"></a>
</h4>
<ol style="list-style-type: decimal">
<li>Install the checklist package with
<code>remotes::install_github("inbo/checklist")</code>.</li>
<li>Run <code><a href="../reference/setup_package.html">checklist::setup_package()</a></code>. This will add and/or
modify files. Inspect the modified files, especially if you are updating
to a new checklist version and made some tweaks in the past.</li>
<li>Commit the changes.</li>
<li>Run <code>x &lt;- checklist::check_package()</code> and fix any
issues. Repeat this step until you have only issues that are not a
problem. Commit any remaining changes.</li>
<li>Update the <code>checklist.yml</code> with
<code>checklist::write_checklist(x)</code>. This function will ask you
which (if any) of the current allowed warnings and notes you want to
keep. Then it asks which warnings and notes you want to allow. You’ll
need to motivate each of them.</li>
<li>Run <code>x &lt;- checklist::check_package()</code>. This should run
without returning an error.</li>
</ol>
</div>
<div class="section level4">
<h4 id="online-setup">Online setup<a class="anchor" aria-label="anchor" href="#online-setup"></a>
</h4>
<ol style="list-style-type: decimal">
<li>Go to <a href="https://about.codecov.io" class="external-link uri">https://about.codecov.io</a> and login with your GitHub
account. Search for your package repository in the INBO organisation.
Copy the token.</li>
<li>Go to your package repository on GitHub. Choose <em>Settings</em>
&gt; <em>Secrets</em>. Create a new repository secret with <em>name</em>
<code>CODECOV_TOKEN</code> and the token you copied as
<em>value</em>.</li>
<li>Push changes from your local repository to GitHub. This will start
the checks on GitHub. An orange circle, green thick mark or red cross
will appear next to the latest commit or PR. Wait for all tests to
finish (either green thick or red cross).</li>
<li>Go in your package GitHub repository to <em>Settings</em> &gt;
<em>Branches</em>. <em>Add rule</em> for <em>Branch name pattern</em>
<code>main</code> and select the following items and <em>Save
changes</em>.
<ul>
<li><code>Require status checks to pass before merging</code></li>
<li><code>Require branches to be up to date before merging</code></li>
<li>
<em>Status checks found in the last week for this repository</em>
<ul>
<li><code>check package</code></li>
<li><code>macOS (release)</code></li>
<li><code>ubuntu (oldrel)</code></li>
<li><code>ubuntu (devel)</code></li>
<li><code>windows (release)</code></li>
</ul>
</li>
</ul>
</li>
<li>Go in your package GitHub repository to <em>Settings</em> &gt;
<em>Pages</em>. Select <em>Deploy for branch</em> as source,
<code>gh-pages</code> as branch and save the changes.</li>
</ol>
</div>
</div>
<div class="section level2">
<h2 id="troubleshooting">Troubleshooting<a class="anchor" aria-label="anchor" href="#troubleshooting"></a>
</h2>
<div class="section level3">
<h3 id="failing-status-check-check-package">Failing status check <code>check package</code><a class="anchor" aria-label="anchor" href="#failing-status-check-check-package"></a>
</h3>
<p>Sometimes the check package GitHub Action (<code>GHA</code>) may fail
for other reasons than failure of one or more of the checks executed by
<code><a href="../reference/check_package.html">checklist::check_package()</a></code>. This is likely due to a missing
dependency when the action tries to install R packages. In that case,
the <code>GHAs</code>, <code>check_on_branch.yml</code> and
<code>check_on_main.yml</code> files need to be modified so the missing
dependency can be installed. To diagnose if this is the case when an
action failed, you can follow these steps:</p>
<ul>
<li>Go to the check package <code>GHA</code> with a red cross
(indicating failure) and click on the <code>details</code> link. You
will be directed to an overview of all steps that were taken in the
action. The page will scroll automatically to where the final error
occurs.</li>
<li>Check if you see an error that looks like:
<ul>
<li><code>ERROR: dependency 'sf' is not available for package 'inborutils'</code></li>
<li><code>ERROR: package installation failed</code></li>
</ul>
</li>
<li>If this is the case, make a mental note of which package(s) failed
to install.</li>
<li>Next, open the raw logs by clicking on the gear icon and then
<code>View raw logs</code>.</li>
<li>Search the log (CTRL+F) using the name of the package or more
specifically search for
<code>installing *source* package '&lt;packagename&gt;'</code>. Also try
searching for <code>error:</code>, <code>failed</code> and
<code>deb:</code>.
<ul>
<li>It is likely that you detect that it is actually a dependency R
package that failed to install and that this failing installation was
due to a missing <em>system</em> dependency.
<ul>
<li>For instance, in the example above, the culprit was that the R
package <code>units</code> - which is a dependency of <code>sf</code> -
failed to install, because it depended on the <em>system</em> dependency
<code>libudunits2-dev</code>
</li>
<li>The easiest way to detect this, is to search for <code>deb:</code>.
Here is a snippet of what you might see:</li>
</ul>
<pre><code>Configuration failed because libudunits2.so was not found. Try installing:
 * deb: libudunits2-dev (Debian, Ubuntu, ...)
 * rpm: udunits2-devel (Fedora, EPEL, ...)
 * brew: udunits (OSX)</code></pre>
</li>
</ul>
</li>
</ul>
<p>To fix this problem in the <code>check_on_branch.yml</code> and
<code>check_on_main.yml</code> files, install it with the
<code>aptget</code> command:</p>
<pre><code>```
    steps:
      - uses: inbo/actions/check_pkg@master
        with:
          aptget: libudunits2-dev
```</code></pre>
<p>In case you need multiple <code>aptget</code> dependencies, add them
to a single <code>aptget</code> item separated with a space.</p>
<pre><code>```
    steps:
      - uses: inbo/actions/check_pkg@master
        with:
          aptget: libudunits2-dev libpoppler-cpp-dev
```</code></pre>
<p>Add, commit and push these changes so they take effect in the
<code>GHAs</code>.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.muscardinus.be" class="external-link">Thierry Onkelinx</a>, <a href="https://www.vlaanderen.be/inbo/en-gb" class="external-link"><img src="https://inbo.github.io/checklist/reference/figures/logo-en.png" height="24" alt="logo of the Research Institute for Nature and Forest (INBO)"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
