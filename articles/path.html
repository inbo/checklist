<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>File paths in code • checklist</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="File paths in code">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="default" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">checklist</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-getting-started" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Getting started</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-getting-started">
<li><a class="dropdown-item" href="../articles/philosophy.html">Philosophy of the checklist package</a></li>
    <li><a class="dropdown-item" href="../articles/coding_style.html">Coding style</a></li>
    <li><a class="dropdown-item" href="../articles/filename.html">Naming conventions for folders and files</a></li>
    <li><a class="dropdown-item" href="../articles/spelling.html">Spell checking with checklist</a></li>
    <li><a class="dropdown-item" href="../articles/folder.html">Recommended folder structure</a></li>
    <li><a class="dropdown-item" href="../articles/organisation.html">Organisations</a></li>
    <li><a class="dropdown-item" href="../articles/getting_started.html">Setting up checklist for a package</a></li>
    <li><a class="dropdown-item" href="../articles/getting_started_project.html">Setting up checklist for a project</a></li>
    <li><a class="dropdown-item" href="../articles/zenodo.html">Setting up the integration between GitHub, Zenodo and ORCID</a></li>
    <li><a class="dropdown-item" href="../articles/path.html">File paths in code</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-contributing" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Contributing</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-contributing">
<li><a class="dropdown-item" href="../CONTRIBUTING.html">Contributing</a></li>
    <li><a class="dropdown-item" href="../CODE_OF_CONDUCT.html">Code of conduct</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/inbo/checklist/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>File paths in code</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/inbo/checklist/blob/main/vignettes/path.Rmd" class="external-link"><code>vignettes/path.Rmd</code></a></small>
      <div class="d-none name"><code>path.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="do-not-use-absolute-file-paths">Do not use absolute file paths<a class="anchor" aria-label="anchor" href="#do-not-use-absolute-file-paths"></a>
</h2>
<p>An absolute file path defines the location of a file or folder
starting from the root of a disk. For example
<code>C:\tmp\test.txt</code> on a Windows machine or
<code>/tmp/test.txt</code> on a Unix machine. Using an absolute path in
your code will likely break the code as soon as you run it on a
different machine. Because that file or folder is probably located
somewhere else on the other machine.</p>
<p><code><a href="../reference/check_lintr.html">check_lintr()</a></code> looks for absolute paths in your code and
turns them into an error. This check is optional (but strongly
recommended) with <code><a href="../reference/check_project.html">check_project()</a></code> and mandatory with
<code><a href="../reference/check_package.html">check_package()</a></code>.</p>
</div>
<div class="section level2">
<h2 id="easiest-solution-use-relative-paths-within-the-project">Easiest solution: use relative paths within the project<a class="anchor" aria-label="anchor" href="#easiest-solution-use-relative-paths-within-the-project"></a>
</h2>
<p>In <code><a href="../articles/folder.html">vignette("folder", package = "checklist")</a></code> we
recommend what folder structure to use in an R project.</p>
<p>We expect users to run the scripts with the base RStudio project as
working directory. The base RStudio project is the one containing the
<code>checklist.yml</code> file. Make every path relative to the
location of this file.</p>
<p>In case of <strong>Rmarkdown</strong> files, use paths relative to
the location of the main Rmarkdown file. And make sure to work in an
RStudio project at the location of that file. Note that you can have
“nested” RStudio projects.</p>
<p>Let’s illustrate this with an example. We assume a base RStudio
project with a <code>checklist.yml</code> file at its root. Suppose the
main Rmarkdown file is <code>source/bookdown/index.Rmd</code>. We have
an RStudio project at <code>source/bookdown</code>, so that the working
directory is by default at this location. In one of the code chunks you
want to read <code>data/observations.txt</code>. Then point the read
function to <code>../../data/observations.txt</code>. <code>..</code>
moves one step towards the root of the disk. The working directory
within the Rmarkdown files will be <code>source/bookdown</code>. A
single <code>..</code> points in this case at <code>source</code>.
<code>../..</code> points from <code>source/bookdown</code> to the root
of the project. Then we need to move up into the <code>data</code>
folder by using <code>../../data</code>.</p>
<p>Another option is to use the <code>get_path</code> method on the
<code>checklist</code> object to get this location. Then use that
information to define the absolute location of the files within the
project.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://inbo.github.io/checklist/">checklist</a></span><span class="op">)</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_checklist.html">read_checklist</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">get_path</span>, <span class="st">"data"</span>, <span class="st">"observations.txt"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="alternative-solution-use-relative-paths-between-projects">Alternative solution: use relative paths between projects<a class="anchor" aria-label="anchor" href="#alternative-solution-use-relative-paths-between-projects"></a>
</h2>
<p>Sometimes you need to store the data outside of the project. For
example because several projects share the same data. In such case you
can place the projects and the data in a shared folder structure. Then
you can still rely on relative paths to point to the common data outside
of the project. Note that this requires that every user complies to use
the same structure. The maintainer should document this structure and
give the user instructions on how to set up a project. A good example
can be found in the <a href="https://inbo.github.io/n2khab/articles/v020_datastorage.html" class="external-link">data
storage vignette</a> of the <a href="https://inbo.github.io/n2khab/index.html" class="external-link"><code>n2khab</code></a>
package.</p>
<pre><code>superproject
|-- shared_data
|-- project_a
  |-- source
|-- project_b
  |-- source</code></pre>
</div>
<div class="section level2">
<h2 id="fallback-solution-ask-the-user-to-specify-the-path">Fallback solution: ask the user to specify the path<a class="anchor" aria-label="anchor" href="#fallback-solution-ask-the-user-to-specify-the-path"></a>
</h2>
<p>This solution relies on setting a system variable on the computer of
the user. Simply create a <code>.Renviron</code> text file at the root
of the RStudio project. This file contains a list of key-value pairs as
shown in the example below. Please choose a more suitable name than
<code>MYPROJECT_DATA</code>. Using a project specific name minimises the
potential of multiple projects using the same system variables.</p>
<p>Content of <code>.Renviron</code></p>
<pre><code><span><span class="va">MYPROJECT_DATA</span><span class="op">=</span><span class="st">"C:\temp"</span></span></code></pre>
<p>Starting the RStudio project will load the system variables set in
<code>.Renviron</code>. Keep in mind that you need might a
<code>.Renviron</code> in every RStudio project where you use this
trick.</p>
<p>Location of <code>.Renviron</code></p>
<pre><code>project_a
|-- .Renviron
|-- project_a.Rproj
|-- data
|-- source
  |-- bookdown
    |-- .Renviron
    |-- bookdown.Rproj
    |-- index.Rmd
  |-- script.R</code></pre>
<p>The following R code chunk illustrates how to read and use the system
variable. Besides writing good documentation, you should check the
content of the system variable. Your code should provide helpful errors
when the user fails to set the correct system variable. In the example
below we use <code><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot()</a></code>. This function uses named
expressions. Every expression must yield a single <code>TRUE</code> or
<code>FALSE</code>. When the expression yields <code>FALSE</code>, the
function returns an error using the name of the expression. When the
expression yields <code>TRUE</code>, the code continues without a
message.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"MYPROJECT_DATA"</span>, <span class="cn">NA</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span></span>
<span>  <span class="st">"System variable `MYPROJECT_DATA` not set"</span> <span class="op">=</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">data_path</span><span class="op">)</span>,</span>
<span>  <span class="st">"`MYPROJECT_DATA` is not an existing directory"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/utils/filetest.html" class="external-link">file_test</a></span><span class="op">(</span><span class="st">"-d"</span>, <span class="va">data_path</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">data_path</span>, <span class="st">"data"</span>, <span class="st">"observations.txt"</span><span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.muscardinus.be" class="external-link">Thierry Onkelinx</a>, <a href="https://www.vlaanderen.be/inbo/en-gb" class="external-link"><img src="https://inbo.github.io/checklist/reference/figures/logo-en.png" height="24" alt="logo of the Research Institute for Nature and Forest (INBO)"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
